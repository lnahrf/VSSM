let vssm;class VSSM{constructor(t){this.combinedState=(t=>{let e={};for(var[s,r]of Object.entries(t))e[s]=r.proxy;return e})(t)}}class VSSMState{static defineParents=(t,e="")=>{for(var[s,r]of Object.entries(t))"object"==typeof r&&(r.parent=e,this.defineParents(r,s))};static defineMutationEvents=(t,e)=>{const s={};for(const r of Object.keys(t))s[r]=new Event(e+"."+r);return s};static initParams=(t,e,s)=>{const r={};for(var[a,n]of Object.entries(t))r[a]=new VSSMParam(n,a,e,s[a]);return r};constructor(t,e){this.name=t,this.origin={...e},this.constructor.defineParents(this.origin),this.mutationEvents=this.constructor.defineMutationEvents(this.origin,this.name),this.params=this.constructor.initParams(e,this.name,this.mutationEvents),this.watchParam=(t,e)=>{const s=this.params[t];t=s.parent+"."+s.key;document.removeEventListener(t,s.performTasks),s.tasks.push(e),document.addEventListener(t,s.performTasks)},this.proxy=new Proxy(this,{set:(t,e,s)=>("function"==typeof s?this.watchParam(e,s):this.params[e].proxy.value=s,t),get:(t,e)=>this.params[e].proxy.value})}}class VSSMParam{constructor(t,e,s,r){this.value=t,this.key=e,this.parent=s,this.event=r,this.tasks=[],this.performTasks=()=>this.tasks.map(t=>t()),this.proxy=new Proxy({value:this.value},{set:(t,e,s)=>{if(e in t)return t[e]=s,document.dispatchEvent(this.event),t},get:t=>t.value})}}const createVSSM=t=>vssm=new VSSM(t),createState=(t,e)=>new VSSMState(t,e),getVSSM=()=>vssm.combinedState;export{createVSSM,createState,getVSSM};